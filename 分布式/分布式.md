`介绍和分布式架构`   
重要的`进程`   
`进程间通信`，通信打破独立运行涉及`同步`协作和相互`资源的访问`  
!`复制副本`（可靠性可扩展性和性能（服务器负载，地理位置，访问的便捷）导致`一致性`问题（更新的传播，副本同样的修改更新  
!`容错`（容忍错误发生故障仍能运行，从故障中恢复）（出现问题！！！）


以数据为中心的一致性模型，以客户为中心的一致性模型（简单的可实现的




一个协作者，单点失效
顺序一致性：主备份协议（每个数据项有一个主备份副本，更新操作在主副本上进行再传播：远程写协议，本地写协议，结合）
复制的写协议（更新操作在多个副本上进行）：主动复制（更新传播到所有副本，保证操作的顺序：全序的多播机制：lampart时间戳，定序器），基于多数表决的协议（读写操作需要请求多个服务器得到许可（读团体/写团体的原子性：2-读写冲突/写写冲突（only无读读））多种变形：半数+1，ROWA）


发生错误-处理故障：冗余（信息：加信息/时间：重发/物理：复制多备份几个投票）
分布式系统：进程故障，通信故障（有多种故障，主要的是崩溃性故障和遗漏性故障）
### 进程故障
进程容错：复制进程（目的：一个进程失败，其他进程代替接管/方法：）组织成组（目的：组的概率把进程集合形成单一概念。方法：）
进程组的复制-组织方式：
（复制：主备份协议）：等级组（单点失败问题）
（复制：复制的写协议）平等组（分布式协调的代价）---->（`可靠多播`）

`可靠多播`：消息可靠的发送给多个接收者（进程组里所有进程）
基本方法：（数目较少时）多个可靠点对点通信：发送方反馈拥塞--只反馈否认：不确保避免拥塞+长久缓存---反馈抑制：2：1.无等级反馈控制
可扩展可靠多播，接收方规模

`K容错`：一次性最多容忍K个错误
沉默失败：K+1
拜占庭失败（故障继续运行）：至少2K+1（K+K+1）~3K+1画图题/多数决策！
拜占庭问题：尔虞我诈欺骗对应发生故障错误

`故障检测`：1节点主动探测其他节点(ping ping不通看其他) 2.定期告知邻节点(可用信息很旧说明故障)

### 通信故障
RPC
正常：隐层通信，使远程调用好像本地调用
出现问题：5种(1+2+2/流程顺序)
1.无法定位：\
2.请求消息丢失：定时器重发即可
3.服务器崩溃：！
3.应答丢失：无法判断到底情况没收到，幂等性？：简单重发+序列号
5.客户端崩溃：孤儿进程


## 可靠多播
客户服务器


## 分布式提交

## 恢复


共性问题和解决方案：
中间件
进程 机器 节点
操作银行和打印的例子幂等非幂等
问题：故障处理：3冗余
重发序列号
中心协作者和分布式处理
单点失败问题vs分布式协调的代价

任意缓慢的进程和崩溃的进程,网络故障还是节点故障
本质问题，思想迁移
